{"version":3,"sources":["calendar-input/calendar-input.jsx"],"names":["CUSTOM_DATE_FORMAT","NATIVE_DATE_FORMAT","IS_BROWSER","window","SUPPORTS_INPUT_TYPE_DATE","inputtypes","date","CalendarInput","state","isMobile","isInputFocused","isCalendarFocused","opened","value","props","defaultValue","month","calendar","earlierLimit","undefined","laterLimit","componentDidMount","calendarPopup","element","nativeCalendarTarget","customCalendarTarget","getBoxNode","setTarget","componentWillUnmount","timeoutId","clearTimeout","changeCloseTimeoutId","render","cn","Input","Popup","commonProps","disabled","tabIndex","formNoValidate","nativeProps","min","max","wrapperProps","isMobilePopup","role","onClick","handleMobileWrapperClick","width","handleMqMatchChange","canBeNative","handleNativeInputBlur","handleNativeInputChange","handleNativeInputFocus","isNativeInput","size","label","placeholder","hint","error","id","name","handleCustomInputBlur","handleCustomInputChange","handleCustomInputFocus","handleInputKeyDown","withIcon","handleIconButtonClick","renderPopup","directions","renderMobileHeader","mobile","handleCalendarBlur","handleCalendarFocus","handleCalendarKeyDown","handleCalendarChange","handleCalendarMonthChange","mobileTitle","handlePopupCloserClick","formatted","isTriggeredByKeyboard","setTimeout","blur","setState","onCalendarChange","onChange","event","changeFocused","which","ESCAPE","preventDefault","focus","ENTER","SPACE","onCalendarKeyDown","onKeyDown","length","onInputChange","target","onInputFocus","resultEvent","onInputBlur","DOWN_ARROW","onInputKeyDown","isMatched","setOpened","targetRef","scrollTo","mobileMode","focusedState","newState","relatedTarget","explicitOriginalTarget","document","activeElement","calendarWillReceiveFocus","getNode","newFocused","newOpened","onFocus","onBlur","newMonth","Component","propTypes","string","shape","number","selectedFrom","selectedTo","onValueChange","func","onMonthChange","outputFormat","months","arrayOf","weekdays","offDays","eventDays","showToday","bool","showArrows","isKeyboard","node","theme","oneOf","className","onKeyUp","defaultProps"],"mappings":"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","file":"calendar-input.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { autobind } from 'core-decorators';\nimport React from 'react';\nimport formatDate from 'date-fns/format';\nimport Type from 'prop-types';\n\nimport Calendar from '../calendar/calendar';\nimport IconCalendar from '../icon/entity/calendar';\nimport IconButton from '../icon-button/icon-button';\nimport Input from '../input/input';\nimport Mq from '../mq/mq';\nimport Popup from '../popup/popup';\nimport PopupHeader from '../popup-header/popup-header';\n\nimport cn from '../cn';\nimport keyboardCode from '../lib/keyboard-code';\nimport Modernizr from '../modernizr';\nimport { isNodeOutsideElement } from '../lib/window';\nimport { parseDate, calculateMonth, changeDateFormat } from './utils';\nimport performance from '../performance';\n\n/**\n * NB: В нативном календаре нельзя менять формат даты. Приемлем только YYYY-MM-DD формат.\n * https://www.w3.org/TR/html-markup/input.date.html#input.date.attrs.value\n * https://tools.ietf.org/html/rfc3339#section-5.6\n*/\nconst CUSTOM_DATE_FORMAT = 'DD.MM.YYYY';\nconst NATIVE_DATE_FORMAT = 'YYYY-MM-DD';\nconst IS_BROWSER = typeof window !== 'undefined';\nconst SUPPORTS_INPUT_TYPE_DATE = IS_BROWSER && Modernizr.inputtypes.date;\n\n\n/**\n * Компонент для ввода даты.\n */\n@cn('calendar-input', Input, Popup)\n@performance(true)\nclass CalendarInput extends React.Component {\n    static propTypes = {\n        /** Содержимое поля ввода */\n        value: Type.string,\n        /** Содержимое поля ввода, указанное по умолчанию */\n        defaultValue: Type.string,\n        /** Свойства компонента [Calendar](../calendar/) */\n        calendar: Type.shape({\n            value: Type.number,\n            selectedFrom: Type.number,\n            selectedTo: Type.number,\n            earlierLimit: Type.number,\n            laterLimit: Type.number,\n            month: Type.number,\n            onValueChange: Type.func,\n            onMonthChange: Type.func,\n            outputFormat: Type.string,\n            months: Type.arrayOf(Type.string),\n            weekdays: Type.arrayOf(Type.string),\n            offDays: Type.arrayOf(Type.number),\n            eventDays: Type.arrayOf(Type.number),\n            showToday: Type.bool,\n            showArrows: Type.bool,\n            isKeyboard: Type.bool,\n            error: Type.node,\n            theme: Type.oneOf(['alfa-on-color', 'alfa-on-white']),\n            className: Type.string,\n            onKeyDown: Type.func,\n            onKeyUp: Type.func,\n            onFocus: Type.func,\n            onBlur: Type.func\n        }),\n        /** Управление возможностью раскрытия календаря */\n        opened: Type.bool,\n        /** Управление возможностью компонента занимать всю ширину родителя */\n        width: Type.oneOf(['default', 'available']),\n        /** Направления, в которые может открываться попап компонента */\n        directions: Type.arrayOf(Type.oneOf([\n            'anchor', 'top-left', 'top-center', 'top-right', 'left-top', 'left-center', 'left-bottom', 'right-top',\n            'right-center', 'right-bottom', 'bottom-left', 'bottom-center', 'bottom-right'\n        ])),\n        /** Управление возможностью изменения значения компонента */\n        disabled: Type.bool,\n        /** Размер компонента */\n        size: Type.oneOf(['s', 'm', 'l', 'xl']),\n        /** Последовательность перехода между контролами при нажатии на Tab */\n        tabIndex: Type.number,\n        /** Управление рендером иконки календаря в инпуте */\n        withIcon: Type.bool,\n        /** Лейбл для поля */\n        label: Type.node,\n        /** Подсказка в поле */\n        placeholder: Type.string,\n        /** Подсказка под полем */\n        hint: Type.node,\n        /** Отображение ошибки */\n        error: Type.node,\n        /** Управление нативным режимом на мобильных устройствах */\n        mobileMode: Type.oneOf(['native', 'popup']),\n        /** Подсказка над меню в мобильном режиме */\n        mobileTitle: Type.node,\n        /** Идентификатор компонента в DOM */\n        id: Type.string,\n        /** Имя компонента в DOM */\n        name: Type.string,\n        /** Дополнительный класс */\n        className: Type.string,\n        /** Тема компонента */\n        theme: Type.oneOf(['alfa-on-color', 'alfa-on-white']),\n        /** Обработчик установки фокуса на компонент */\n        onFocus: Type.func,\n        /** Обработчик снятия фокуса с компонента */\n        onBlur: Type.func,\n        /** Обработчик установки фокуса на поле ввода */\n        onInputFocus: Type.func,\n        /** Обработчик снятия фокуса с поля ввода */\n        onInputBlur: Type.func,\n        /** Обработчик ввода даты в текстовом поле */\n        onInputChange: Type.func,\n        /** Обработчик выбора даты в календаре */\n        onCalendarChange: Type.func,\n        /** Обрабочик изменения даты в календаре */\n        onChange: Type.func,\n        /** Обработчик события нажатия на клавишу в момент, когда фокус находится на компоненте */\n        onKeyDown: Type.func,\n        /** Обработчик события нажатия на клавишу клавиатуры в момент, когда фокус находится в календаре */\n        onCalendarKeyDown: Type.func,\n        /** Обработчик события нажатия на клавишу клавиатуры в момент, когда фокус находится на текстовом поле */\n        onInputKeyDown: Type.func\n    };\n\n    static defaultProps = {\n        withIcon: true,\n        directions: ['bottom-left', 'bottom-right', 'top-left', 'top-right'],\n        placeholder: '00.00.0000',\n        mobileMode: 'native'\n    };\n\n    state = {\n        isMobile: false,\n        isInputFocused: false,\n        isCalendarFocused: false,\n        opened: false,\n        value: this.props.defaultValue || '',\n        month: calculateMonth(\n            this.props.value,\n            CUSTOM_DATE_FORMAT,\n            this.props.calendar ? this.props.calendar.earlierLimit : undefined,\n            this.props.calendar ? this.props.calendar.laterLimit : undefined\n        )\n    };\n\n    /**\n     * @type {Number}\n     */\n    timeoutId;\n\n    /**\n     * @type {Number}\n     */\n    changeCloseTimeoutId;\n\n    /**\n     * @type {Calendar}\n     */\n    calendar;\n\n    /**\n     * @type {Popup}\n     */\n    calendarPopup;\n\n    /**\n     * @type {Input}\n     */\n    customCalendarTarget;\n\n    /**\n     * @type {HTMLInputElement}\n     */\n    nativeCalendarTarget;\n\n    componentDidMount() {\n        if (this.calendarPopup) {\n            let element;\n\n            if (this.nativeCalendarTarget) {\n                element = this.nativeCalendarTarget;\n            } else if (this.customCalendarTarget) {\n                element = this.customCalendarTarget.getBoxNode();\n            }\n\n            if (element) {\n                this.calendarPopup.setTarget(element);\n            }\n        }\n    }\n\n    componentWillUnmount() {\n        if (this.timeoutId) {\n            clearTimeout(this.timeoutId);\n            this.timeoutId = null;\n        }\n        if (this.changeCloseTimeoutId) {\n            clearTimeout(this.changeCloseTimeoutId);\n            this.changeCloseTimeoutId = null;\n        }\n    }\n\n    render(cn, Input, Popup) {\n        let value = this.props.value !== undefined\n            ? this.props.value\n            : this.state.value;\n\n        let commonProps = {\n            disabled: this.props.disabled,\n            tabIndex: this.props.tabIndex,\n            formNoValidate: true\n        };\n\n        let nativeProps = {\n            min: formatDate(this.props.calendar && this.props.calendar.earlierLimit, NATIVE_DATE_FORMAT),\n            max: formatDate(this.props.calendar && this.props.calendar.laterLimit, NATIVE_DATE_FORMAT)\n        };\n\n        let wrapperProps = this.isMobilePopup() && !this.props.disabled\n            ? {\n                role: 'button',\n                tabIndex: 0,\n                onClick: this.handleMobileWrapperClick\n            }\n            : {};\n\n        return (\n            <span\n                className={ cn({ width: this.props.width }) }\n                { ...wrapperProps }\n            >\n                <Mq\n                    query='--small-only'\n                    touch={ true }\n                    onMatchChange={ this.handleMqMatchChange }\n                >\n                    {\n                        this.canBeNative() &&\n                        <input\n                            ref={ (nativeCalendarTarget) => {\n                                this.nativeCalendarTarget = nativeCalendarTarget;\n                            } }\n                            { ...commonProps }\n                            { ...nativeProps }\n                            className={ cn('native-control') }\n                            type='date'\n                            value={ changeDateFormat(value, CUSTOM_DATE_FORMAT, NATIVE_DATE_FORMAT) }\n                            onBlur={ this.handleNativeInputBlur }\n                            onChange={ this.handleNativeInputChange }\n                            onFocus={ this.handleNativeInputFocus }\n                        />\n                    }\n                </Mq>\n                <Input\n                    ref={ (customCalendarTarget) => {\n                        this.customCalendarTarget = customCalendarTarget;\n                    } }\n                    { ...commonProps }\n                    className={ cn('custom-control') }\n                    disabledAttr={ this.isNativeInput() || this.isMobilePopup() }\n                    focused={ this.state.isInputFocused || this.state.isCalendarFocused }\n                    mask='11.11.1111'\n                    size={ this.props.size }\n                    type='text'\n                    label={ this.props.label }\n                    placeholder={ this.props.placeholder }\n                    hint={ this.props.hint }\n                    error={ this.props.error }\n                    value={ value }\n                    width={ this.props.width }\n                    id={ this.props.id }\n                    name={ this.props.name }\n                    onBlur={ this.handleCustomInputBlur }\n                    onChange={ this.handleCustomInputChange }\n                    onFocus={ this.handleCustomInputFocus }\n                    onKeyDown={ this.handleInputKeyDown }\n                    icon={\n                        this.props.withIcon &&\n                        <IconButton onClick={ this.handleIconButtonClick }>\n                            <IconCalendar\n                                size={ this.props.size }\n                            />\n                        </IconButton>\n                    }\n                />\n                { this.renderPopup(cn, value, Popup) }\n            </span>\n        );\n    }\n\n    renderPopup(cn, value, Popup) {\n        let opened = this.props.opened !== undefined\n            ? this.props.opened\n            : this.state.opened;\n\n        return (\n            <Popup\n                ref={ (calendarPopup) => { this.calendarPopup = calendarPopup; } }\n                for={ this.props.name }\n                visible={ opened }\n                directions={ this.props.directions }\n                target={ this.isMobilePopup() ? 'screen' : 'anchor' }\n                header={ this.isMobilePopup() && this.renderMobileHeader() }\n            >\n                <div className={ cn('calendar-wrapper', { mobile: this.isMobilePopup() }) }>\n                    <Calendar\n                        ref={ (calendar) => { this.calendar = calendar; } }\n                        month={ this.state.month }\n                        { ...this.props.calendar }\n                        value={ parseDate(value, CUSTOM_DATE_FORMAT) }\n                        onBlur={ this.handleCalendarBlur }\n                        onFocus={ this.handleCalendarFocus }\n                        onKeyDown={ this.handleCalendarKeyDown }\n                        onValueChange={ this.handleCalendarChange }\n                        onMonthChange={ this.handleCalendarMonthChange }\n                    />\n                </div>\n            </Popup>\n        );\n    }\n\n    renderMobileHeader() {\n        return (\n            <PopupHeader\n                size={ this.props.size }\n                title={ this.props.mobileTitle || this.props.label || 'Выберите дату' }\n                onCloserClick={ this.handlePopupCloserClick }\n            />\n        );\n    }\n\n    @autobind\n    handleCalendarChange(value, formatted, isTriggeredByKeyboard) {\n        if (!isTriggeredByKeyboard) {\n            this.changeCloseTimeoutId = setTimeout(() => {\n                this.calendar.blur(); // FF не испускает событие `blur` когда элементы становятся невидимыми, делаем это явно\n                this.setState({\n                    opened: false\n                });\n                this.changeCloseTimeoutId = null;\n            }, 0);\n        }\n\n        this.setState({ value: formatted });\n\n        if (this.props.onCalendarChange) {\n            this.props.onCalendarChange(formatted);\n        }\n\n        if (this.props.onChange) {\n            this.props.onChange(formatted, value);\n        }\n    }\n\n    @autobind\n    handleCalendarMonthChange(month) {\n        this.setState({\n            month\n        });\n    }\n\n    @autobind\n    handleCalendarFocus(event) {\n        this.changeFocused({ isCalendarFocused: true }, event);\n    }\n\n    @autobind\n    handleCalendarBlur(event) {\n        this.changeFocused({ isCalendarFocused: false }, event);\n    }\n\n    @autobind\n    handleCalendarKeyDown(event) {\n        switch (event.which) {\n            case keyboardCode.ESCAPE:\n                event.preventDefault();\n                this.customCalendarTarget.focus();\n                break;\n            case keyboardCode.ENTER:\n            case keyboardCode.SPACE:\n                event.preventDefault();\n                this.setState({\n                    opened: false\n                });\n                break;\n        }\n\n        if (this.props.onCalendarKeyDown) {\n            this.props.onCalendarKeyDown(event);\n        }\n\n        if (this.props.onKeyDown) {\n            this.props.onKeyDown(event);\n        }\n    }\n\n    @autobind\n    handleIconButtonClick() {\n        this.customCalendarTarget.focus();\n    }\n\n    @autobind\n    handleCustomInputChange(value) {\n        let month = calculateMonth(\n            value,\n            CUSTOM_DATE_FORMAT,\n            this.props.calendar ? this.props.calendar.earlierLimit : undefined,\n            this.props.calendar ? this.props.calendar.laterLimit : undefined\n        );\n\n        this.setState({ value });\n\n        // Изменяет месяц в календаре в соответствии с введёной в поле валидной датой\n        if (value && value.length === CUSTOM_DATE_FORMAT.length && month !== this.state.month) {\n            this.setState({ month });\n        }\n\n        if (this.props.onInputChange) {\n            this.props.onInputChange(value);\n        }\n\n        if (this.props.onChange) {\n            this.props.onChange(value, parseDate(value, CUSTOM_DATE_FORMAT));\n        }\n    }\n\n    @autobind\n    handleNativeInputChange(event) {\n        let value = changeDateFormat(event.target.value, NATIVE_DATE_FORMAT, CUSTOM_DATE_FORMAT);\n\n        // Детектим нажатие `сlear` в нативном календаре\n        if (this.state.value === value) {\n            value = '';\n        }\n\n        this.setState({ value });\n\n        if (this.props.onInputChange) {\n            this.props.onInputChange(value);\n        }\n\n        if (this.props.onChange) {\n            this.props.onChange(value, parseDate(value, CUSTOM_DATE_FORMAT));\n        }\n    }\n\n    @autobind\n    handleCustomInputFocus(event) {\n        this.changeFocused({ isInputFocused: true }, event);\n\n        if (this.props.onInputFocus) {\n            this.props.onInputFocus(event);\n        }\n    }\n\n    @autobind\n    handleNativeInputFocus(event) {\n        // Копируем пришедший из аргументов SyntheticEvent для дальнейшего редактирования\n        let resultEvent = {\n            ...event,\n            // Трансформируем нативную YYYY-MM-DD дату в кастомный формат на вывод в коллбэках\n            target: { value: changeDateFormat(event.target.value, NATIVE_DATE_FORMAT, CUSTOM_DATE_FORMAT) }\n        };\n\n        this.changeFocused({ isInputFocused: true }, resultEvent);\n\n        if (this.props.onInputFocus) {\n            this.props.onInputFocus(resultEvent);\n        }\n    }\n\n    @autobind\n    handleCustomInputBlur(event) {\n        this.changeFocused({ isInputFocused: false }, event);\n\n        if (this.props.onInputBlur) {\n            this.props.onInputBlur(event);\n        }\n    }\n\n    @autobind\n    handleNativeInputBlur(event) {\n        // Копируем пришедший из аргументов SyntheticEvent для дальнейшего редактирования\n        let resultEvent = {\n            ...event,\n            // Трансформируем нативную YYYY-MM-DD дату в кастомный формат на вывод в коллбэках\n            target: { value: changeDateFormat(event.target.value, NATIVE_DATE_FORMAT, CUSTOM_DATE_FORMAT) }\n        };\n\n        this.changeFocused({ isInputFocused: false }, resultEvent);\n\n        if (this.props.onInputBlur) {\n            this.props.onInputBlur(resultEvent);\n        }\n    }\n\n    @autobind\n    handleInputKeyDown(event) {\n        switch (event.which) {\n            case keyboardCode.DOWN_ARROW: {\n                event.preventDefault();\n\n                let value = this.props.value !== undefined\n                    ? this.props.value\n                    : this.state.value;\n\n                this.setState({\n                    opened: true,\n                    month: calculateMonth(\n                        value,\n                        CUSTOM_DATE_FORMAT,\n                        this.props.calendar ? this.props.calendar.earlierLimit : undefined,\n                        this.props.calendar ? this.props.calendar.laterLimit : undefined\n                    )\n                });\n\n                this.calendar.focus();\n\n                break;\n            }\n            case keyboardCode.ESCAPE: {\n                event.preventDefault();\n\n                this.setState({\n                    opened: false\n                });\n\n                break;\n            }\n        }\n\n        if (this.props.onInputKeyDown) {\n            this.props.onInputKeyDown(event);\n        }\n\n        if (this.props.onKeyDown) {\n            this.props.onKeyDown(event);\n        }\n    }\n\n    @autobind\n    handleMqMatchChange(isMatched) {\n        this.setState({\n            isMobile: isMatched\n        });\n    }\n\n    @autobind\n    handleMobileWrapperClick() {\n        this.setOpened(true);\n    }\n\n    @autobind\n    handlePopupCloserClick() {\n        this.setOpened(false);\n    }\n\n    /**\n     * Устанавливает фокус на поле ввода, открывает календарь.\n     *\n     * @public\n     */\n    focus() {\n        let targetRef = this.nativeCalendarTarget || this.customCalendarTarget;\n\n        targetRef.focus();\n    }\n\n    /**\n     * Убирает фокус с поля ввода.\n     *\n     * @public\n     */\n    blur() {\n        let targetRef = this.nativeCalendarTarget || this.customCalendarTarget;\n\n        targetRef.blur();\n    }\n\n    /**\n     * Скроллит страницу до поля ввода.\n     *\n     * @public\n     */\n    scrollTo() {\n        this.customCalendarTarget.scrollTo();\n    }\n\n    canBeNative() {\n        return SUPPORTS_INPUT_TYPE_DATE && this.props.mobileMode === 'native';\n    }\n\n    isNativeInput() {\n        return this.state.isMobile && this.canBeNative();\n    }\n\n    isMobilePopup() {\n        return this.state.isMobile && this.props.mobileMode === 'popup';\n    }\n\n    changeFocused(focusedState, event) {\n        let newState = {\n            isInputFocused: this.state.isInputFocused,\n            isCalendarFocused: this.state.isCalendarFocused,\n            ...focusedState\n        };\n\n        // При переключении фокуса с поля ввода на календарь событие `blur` у поля ввода иногда происходит перед фокусом календаря\n        // Поэтому проверяем элемент который получит фокус после блюра и если он внутри календаря - оставляем сфокусированное состояние.\n        let relatedTarget = event.relatedTarget || // не поддерживается в FF и IE10 https://github.com/facebook/react/issues/2011\n            event.explicitOriginalTarget || // не поддерживается в IE\n            document.activeElement; // В IE вернет не <calendar> а конкретную ноду, на которую пришел фокус\n\n        let calendarWillReceiveFocus = !isNodeOutsideElement(relatedTarget, this.calendar.getNode());\n\n        let newFocused = newState.isInputFocused\n            || newState.isCalendarFocused\n            || calendarWillReceiveFocus;\n\n        this.setState(focusedState);\n\n        let newOpened = false;\n\n        if (newFocused) {\n            if (this.props.onFocus) {\n                this.props.onFocus(event);\n            }\n\n            newOpened = true;\n        } else if (this.props.onBlur) {\n            this.props.onBlur(event);\n        }\n\n        if (!this.isNativeInput()) {\n            this.setOpened(newOpened);\n        }\n    }\n\n    setOpened(opened) {\n        if (this.timeoutId) {\n            clearTimeout(this.timeoutId);\n        }\n        this.timeoutId = setTimeout(() => {\n            let value = this.props.value !== undefined\n                ? this.props.value\n                : this.state.value;\n\n            let newMonth = this.state.opened !== opened\n                ? calculateMonth(\n                    value,\n                    CUSTOM_DATE_FORMAT,\n                    this.props.calendar ? this.props.calendar.earlierLimit : undefined,\n                    this.props.calendar ? this.props.calendar.laterLimit : undefined\n                )\n                : this.state.month;\n\n            this.setState({\n                opened,\n                month: newMonth\n            });\n\n            this.timeoutId = null;\n        }, 0);\n    }\n}\n\nexport default CalendarInput;\n"]}