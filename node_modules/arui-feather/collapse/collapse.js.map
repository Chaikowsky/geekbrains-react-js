{"version":3,"sources":["collapse/collapse.jsx"],"names":["Collapse","state","isExpanded","componentDidMount","updateContentHeight","componentDidUpdate","render","cn","expanded","props","undefined","id","content","contentCase","children","handleExpandedChange","expandedLabel","collapsedLabel","newExpandedValue","setState","onExpandedChange","contentHeight","offsetHeight","style","height","Component","propTypes","bool","string","oneOfType","arrayOf","node","theme","oneOf","className","func","defaultProps"],"mappings":"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","file":"collapse.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { autobind } from 'core-decorators';\nimport React from 'react';\nimport Type from 'prop-types';\n\nimport Icon from '../icon/icon';\nimport Link from '../link/link';\nimport ResizeSensor from '../resize-sensor/resize-sensor';\n\nimport cn from '../cn';\nimport performance from '../performance';\n\n/**\n * Компонент «подката» позволяет спрятать кусок текста за ссылку «Еще...».\n */\n@cn('collapse')\n@performance()\nclass Collapse extends React.Component {\n    static propTypes = {\n        /** Управление `expanded` состоянием компонента */\n        isExpanded: Type.bool,\n        /** Текст ссылки в `expanded` состоянии */\n        collapsedLabel: Type.string,\n        /** Текст ссылки в `collapsed` состоянии */\n        expandedLabel: Type.string,\n        /** Дочерние элементы `Collapse` */\n        children: Type.oneOfType([Type.arrayOf(Type.node), Type.node]),\n        /** Тема компонента */\n        theme: Type.oneOf(['alfa-on-color', 'alfa-on-white']),\n        /** Дополнительный класс */\n        className: Type.string,\n        /** Идентификатор компонента в DOM */\n        id: Type.string,\n        /** Обработчик смены состояний `expanded/collapsed` */\n        onExpandedChange: Type.func\n    };\n\n    static defaultProps = {\n        expandedLabel: 'Collapse',\n        collapsedLabel: 'Expand'\n    };\n\n    state = {\n        isExpanded: false\n    };\n\n    content;\n    contentCase;\n\n    componentDidMount() {\n        this.updateContentHeight();\n    }\n\n    componentDidUpdate() {\n        this.updateContentHeight();\n    }\n\n    render(cn) {\n        let expanded = this.props.isExpanded !== undefined\n            ? this.props.isExpanded\n            : this.state.isExpanded;\n\n        return (\n            <div\n                className={ cn({\n                    expanded\n                }) }\n                id={ this.props.id }\n            >\n                <div\n                    ref={ (content) => { this.content = content; } }\n                    className={ cn('content') }\n                >\n                    <div ref={ (contentCase) => { this.contentCase = contentCase; } }>\n                        { this.props.children }\n                    </div>\n                    <ResizeSensor onResize={ this.updateContentHeight } />\n                </div>\n                <Link\n                    className={ cn('link') }\n                    pseudo={ true }\n                    icon={\n                        <Icon\n                            name={ expanded ? 'action-up' : 'action-down' }\n                            size='xs'\n                        />\n                    }\n                    iconPosition='right'\n                    onClick={ this.handleExpandedChange }\n                    text={\n                        expanded\n                            ? this.props.expandedLabel\n                            : this.props.collapsedLabel\n                    }\n                />\n            </div>\n        );\n    }\n\n    @autobind\n    handleExpandedChange() {\n        let newExpandedValue = this.props.isExpanded !== undefined\n            ? !this.props.isExpanded\n            : !this.state.isExpanded;\n\n        this.setState({\n            isExpanded: newExpandedValue\n        });\n\n        if (this.props.onExpandedChange) {\n            this.props.onExpandedChange(newExpandedValue);\n        }\n    }\n\n    @autobind\n    updateContentHeight() {\n        let expanded = this.props.isExpanded !== undefined\n            ? this.props.isExpanded\n            : this.state.isExpanded;\n\n        let contentHeight;\n\n        if (expanded) {\n            contentHeight = this.contentCase.offsetHeight;\n        } else {\n            contentHeight = 0;\n        }\n\n        if (this.content) {\n            this.content.style.height = `${contentHeight}px`;\n        }\n    }\n}\n\nexport default Collapse;\n"]}